function brick(){this.width=50,this.height=brick_height,this.color="#FFFFFF",this.x=0,this.y=0,this.vx=-1,this.vy=-1,this.health=1}function paddle(){this.x=200,this.y=140,this.width=75,this.height=4,this.color="#FFFFFF"}function ball(e,t){this.x=e,this.y=t,this.vx=0,this.vy=0,this.width=15,this.height=5,this.color="#FFFFFF"}function drawBall(){ctx.fillStyle=pongBall.color,ctx.fillRect(pongBall.x,pongBall.y,pongBall.width,pongBall.height)}function getMousePos(e,t){var n=e,r=0,i=0;while(n&&n.tagName!="BODY")r+=n.offsetTop,i+=n.offsetLeft,n=n.offsetParent;var s=t.clientX-i+window.pageXOffset,o=t.clientY-r+window.pageYOffset;return{x:s,y:o}}function init(){populateBricks(),gameLoop(),canvas.addEventListener("mousemove",function(e){var t=getMousePos(canvas,e);player.x=t.x,player.x>=canvas.width-player.width?player.x=canvas.width-player.width:player.x<=0&&(player.x=0)})}function populateBricks(){for(var e=0;e<rows;e++){var t="#FFFFFF";e==0?t="#FF0000":e==1?t="#FF6600":e==2?t="#00FF00":e==3&&(t="#FFFF00");for(var n=0;n<columns;n++){var r=canvas.width/columns,i=new brick;i.x=n*r,i.y=e*i.height,i.color=t,i.width=canvas.width/columns-1,i.height=i.height-1,bricks.push(i)}}}function render(){for(var e=0;e<bricks.length;e++)ctx.fillStyle=bricks[e].color,ctx.fillRect(bricks[e].x,bricks[e].y,bricks[e].width,bricks[e].height);$("#score").html(score),$("#lives").html(lives)}function drawPaddle(){ctx.fillStyle="#FFFFFF",ctx.fillRect(player.x,player.y,player.width,player.height)}function clearCanvas(){ctx.clearRect(0,0,canvas.width,canvas.height)}function moveBall(){pongBall.x+=pongBall.vx,pongBall.y+=pongBall.vy}function resetBall(){pongBall.x=canvas.width/2,pongBall.y=canvas.height/2,pongBall.vx=0,pongBall.vy=0}function detectCollision(){if(pongBall.x+pongBall.width>=canvas.width||pongBall.x<=0)pongBall.vx*=-1;if(pongBall.y<=rows*brick_height){for(var e=0;e<bricks.length;e++)pongBall.y<=bricks[e].y+bricks[e].height&&pongBall.x>=bricks[e].x&&pongBall.x<=bricks[e].x+bricks[e].width&&(brickSound.play(),bricks.splice(e,1),score+=50,pongBall.vy*=-1);pongBall.y<=0&&(pongBall.vy*=-1)}pongBall.y+pongBall.height>=canvas.height&&(lives--,ball_lock=!1,lives>=0?resetBall():(score=0,lives=3,resetBall())),pongBall.x>=player.x&&pongBall.x<=player.x+player.width&&pongBall.y+pongBall.height>=player.y&&(paddleSound.play(),pongBall.vy*=-1)}function gameLoop(){moveBall(),detectCollision(),clearCanvas(),render(),drawPaddle(),drawBall(),requestAnimFrame(gameLoop,canvas)}window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}();var canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),score=0,lives=3,bricks=[],player=new paddle,pongBall=new ball(canvas.width/2,canvas.height/2),ball_lock=!1,rows=4,columns=5,brick_height=5,paddleSound=new Audio("./sounds/BlipHighPitch.wav"),brickSound=new Audio("./sounds/BonkLowPitch.wav"),player=new paddle;$("canvas").click(function(){ball_lock||(ball_lock=!0,pongBall.vx=1.75,pongBall.vy=1.75)})